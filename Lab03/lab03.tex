%!TEX program = xelatex
%Template created by: Maciej Byczko
\documentclass[a4paper,12pt]{extarticle}  %typ dokumentu

% \usepackage[utf8]{inputenc} %rodzaj czcionki w dokumencie
\usepackage{geometry} %poprawienie marginesów
\usepackage{polski} %polskie znaki
\usepackage{multirow} %tabela
\usepackage{graphicx} %tabela
\usepackage{float} %poprawienie pozycji
\usepackage{amsmath} % Matma
\usepackage{fancyhdr} % header i footer
\usepackage{xcolor} %kolorowy tekst
\usepackage{boldline}%edytowanie grubości krawędzi w tabelach \hlineB{} \clineB{}{}
\usepackage{listings} %pisanie kodu w ładny sposób, begin{listings}[language=<język>]...end{listings} tak samo jak nazwa paczki

\usepackage{hyperref} %tworzenie odnośników, \url{<url>}, \href{<file path, link>}{<text with link>} \pageref{}

%Ustawienie paczki hyperref
\hypersetup{
     colorlinks,
     citecolor=black,
     filecolor=black,
     linkcolor=black,
     urlcolor=black
}

\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\definecolor{AO}{rgb}{0,0.5,0}
\definecolor{ZeroBlue}{rgb}{0,0.28,0.73}
\definecolor{DarkRed}{rgb}{0.85,0.16,0.16}

\lstdefinelanguage
   [x64]{Assembler}     % add a "x64" dialect of Assembler
   [x86masm]{Assembler} % based on the "x86masm" dialect
   % nie wolno zamieniać kolejności deklaracji morekeywords
   {
    deletekeywords={mov,inc,org, end, nop, jmp, jnb, jnc, pop, jz, push, ret, jb, jnz},
    morekeywords={[3]a,b,r0,r1,r2,r3,r4,r5,r6,r7,\$,c,dptr, @dptr, @a, 00, acc},
    morekeywords={[2]subb, clr, ljmp, movx,end,mov,inc, nop, jmp, end, orl, jnb, jnc, djnz, sjmp, pop, acall, jz, push, ret, jb, jnz, anl}   
    }

                
\lstset{
     breaklines=true,
     language=[x64]Assembler,
     numbers=left,
     numberstyle=\tiny,
     tabsize=2,
     morecomment=[s]{/*}{*/},
     morecomment=[l]{//},
     backgroundcolor=\color{backcolour},
     breakatwhitespace=false,
     showspaces=false,                
     showstringspaces=false,
     showtabs=false, 
     commentstyle=\color{gray},
     keywordstyle=\color{AO},
     keywordstyle={[2]\color{DarkRed}},
     keywordstyle={[3]\color{ZeroBlue}},
}

\graphicspath{{pictures/}}
\geometry{margin=0.6in}
\pagestyle{fancy}
\cfoot{Strona \thepage}
\rhead{Strona \thepage}
\lhead{\typdoc}
\setlength{\headheight}{15pt}
\newcolumntype{?}{!{\vrule width 1.5pt}}

\title{\tytul}
\author{\tworcy}
\date{\data}

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
\node[shape=circle,draw,inner sep=1pt] (char) {#1};}}

%-----------------------SEKCJA DANYCH----------------------------------
\def\tytul{Klawiatura} %<<< tytuł ćwiczenia
\def\nrcw{4} %<<< numer ćwiczenia
\def\data{8 Kwietnia 2021} %<< data wykonania
\def\prowadzacy{dr inż. Jacek Mazurkiewicz} %<<<prowadzący
\def\nrgrupy{B} %<<<numer grupy
\def\tworcy{Maciej Byczko\\Bartosz Matysiak} %<<< autorzy
\def\zajinfo{Cz 13:15 TN} %<<< informacje dotyczące zajęć
\def\typdoc{Sprawozdanie} %<<< typ dokumentu tj Sprawozdanie, zadania itp. {Matematyka dyskretna/Sprawozdanie z Miernictwa}
% \tableofcontents % Stworzenie spis treści
%JEŻELI COS JESZCZE POTRZEBA W TEJ SEKCJI TO POINFORMOWAĆ!!!
%----------------------------------------------------------------------

%-----------------------SEKCJA FORMATOWANIA----------------------------
% \textbf{pogrubienie}  \textit{kursywa}    \underline{podkreślenie}
% \vspace*{2mm} - Odstęp pionowy między tekstem
%----------------------------------------------------------------------

\begin{document}
%-------------------------------------TABELA-DANYCH--------------------------------------------------
\begin{table}[H]
	\centering
	\resizebox{\textwidth}{!}{
		\begin{tabular}{|c|c|c|}\hline
			\begin{tabular}[c]{@{}c@{}}                     \tworcy     \end{tabular} &
			\begin{tabular}[c]{@{}c@{}}Prowadzący:\\        \prowadzacy \end{tabular} &
			\begin{tabular}[c]{@{}c@{}}Numer ćwiczenia\\    \nrcw       \end{tabular}          \\ \hline
			\begin{tabular}[c]{@{}c@{}}                     \zajinfo    \end{tabular} &
			\begin{tabular}[c]{@{}c@{}}Temat ćwiczenia:\\   \tytul      \end{tabular} & Ocena: \\ \hline
			\begin{tabular}[c]{@{}c@{}}Grupa:   \\          \nrgrupy    \end{tabular} &
			\begin{tabular}[c]{@{}c@{}}Data wykonania:\\    \data       \end{tabular} &        \\ \hline
		\end{tabular}}
\end{table}
%----------------------------------------------------------------------------------------------------
\section{Zadanie 1,2 oraz 3}
\subsection{Polecenie}
\begin{enumerate}
    \item Przygotować program umożliwiający wybór i przypisanie do klawiszy klawiatury 
    jednego z trzech zestawów znaków, 
    które będą wypisywane na wyświetlaczu LCD gdy klawisze klawiatury
    będą naciskane.\\
    Przełączenie zestawów: 
    \begin{itemize}
        \item D - cyfry od 0 do 9 oraz znaki A, B, C,
        \item * - małe litery od a do m,
        \item \# - duże litery do A do M.
    \end{itemize}
% \subsection{Rozwiązanie}
% \lstinputlisting{zad1.asm}
% \section{Zadanie 2}
% \subsection{Polecenie}
\item Przygotować program wyświetlający na LCD znaki uzyskiwane przez naciśnięcia klawiszy klawiatury. 
    Uzyskiwany z klawiatury tekst jest wyświetlany tak by w pierwszej linii LCD pokazanych zostało 16 znaków, 
    po czym następuje automatyczne przejście do drugiej linii, gdzie wyświetlamy kolejne 16 znaków. 
    Jeśli z klawiatury generujemy kolejne znaki, to kasujemy bieżącą zawartość wyświetlacza i 
    znów w pierwszej linii wyświetlamy następne 16 znaków tekstu, w drugiej - kolejne 16 znaków tekstu, itd.
% \subsection{Rozwiązanie}
% \lstinputlisting{zad2.asm}
% \section{Zadanie 3}
% \subsection{Polecenie}
\item Przygotować program realizujący wyłączenie repetycji naciśniętego klawisza - jego kod skaningowy 
    jest poddawany dalszym operacjom dopiero po naciśnięciu i następującym potem zwolnieniu klawisza.
\end{enumerate}
\subsection{Rozwiązanie}
Powyższe polecenia zostały połączone w sposób następujący:
\begin{itemize}
    \item Zachowane zostały klawisze wyboru zestawu znaków tzn. D, *, \# nadal odpowiadają za zmianę używanych symboli.
    \item Gdy są wpisywane znaki to na ekranie zostają one "zawijane" do następnej linii a następnie kasowane gdy wyświetlacz się wypełni.
    \item Repetycja klawiszy została wyłączona
    \item Zamienione zostały znaki A, B, C z zestawu pod klawiszem D na znaki: ":", "-", ")" ponieważ znaki A, B, C można uzyskać w zestawie \#.
\end{itemize}
\clearpage
\lstinputlisting{zadMerge3in1.asm}
\end{document}
